<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Ada's Portfolio</title>
        <link rel="stylesheet" href="styles.css">
     </head>
     <body>
        <div class="bg-image"></div>
        <div class="popup">
            <h1>Ada's Portfolio</h1>
            <button onclick="startPortfolio()">Begin</button>
        </div>
        <script>
            function startPortfolio() {
                const popup = document.querySelector('.popup');
                const bg = document.querySelector('.bg-image');
                bg.style.backgroundImage = "url('background.png')";
                bg.style.opacity = "1";
                // fade out popup
                popup.style.opacity = "0";
                popup.style.transform= "scale(0.9)";
                popup.style.transition = "0.4s";
                setTimeout(() => popup.remove(), 400);
                setTimeout(() => {
                    desktop.style.opacity = "1";
                    desktop.style.pointerEvents = "auto";
                }, 500);
            }
        </script>
        <div class="desktop" id="desktop">
            <div class="icon">
                <img src="Spotify Logo.jpg" alt="App 1">
                <p>Music</p>
            </div>
            <div class="icon">
                <img src="News.jpg" alt="App 1">
                <p>News</p>
            </div>
            <div class="icon photo-icon">
                <img src="File.jpg" alt="App 1">
                <p>Photos</p>
            </div>
            <div class="icon">
                <img src="AllTrails.jpg" alt="App 1">
                <p>Hiking</p>
            </div>
            <div class="icon email-icon">
                <img src="Gmail.jpg" alt="App 1">
                <p>Email</p>
            </div>
            <div class="icon">
                <img src="VScode.jpg" alt="App 1">
                <p>Code</p>
            </div>
        </div>
        <div class="icon-overlay" id="emailWindow">
                <div class="email-popup app-popup">
                    <div class="email-header">
                        <span>New Message</span>
                        <button class="close-button" onclick="closeEmail(event)">✖</button>
                    </div>
                    <div class="email-row">
                        <span class="email-label">To:</span>
                        <input type="text" value="adajiang2020@gmail.com" disabled />
                    </div>
                    <div class="email-row">
                        <span class="email-label">Subject:</span>
                        <input type="text" placeholder="" disabled />
                    </div>
                    <div class="email-body" disabled>
                        You can contact me at adajiang2020@gmail.com or message me at +1 (860)-759-6572.
                    </div>
                </div>
            </div>
            <div class="icon-overlay" id="photoWindow">
                <div class="photo-popup app-popup">
                    <div class="photo-header">
                        <span>Photos</span>
                        <button class="close-button" onclick="closePhoto(event)">✖</button>
                    </div>
                </div>
            </div>
            <script>
                let currentZIndex = 100;
                document.querySelector('.email-icon').addEventListener('click', () => {
                    const popup = document.getElementById('emailWindow');
                    popup.style.display = 'flex';
                    currentZIndex++;
                    popup.style.zIndex = currentZIndex;
                });

                document.querySelector('.photo-icon').addEventListener('click', () => {
                    const popup = document.getElementById('photoWindow');
                    popup.style.display = 'flex';
                    currentZIndex++;
                    popup.style.zIndex = currentZIndex;
                });

                document.querySelectorAll('.app-popup').forEach(popup => {
                    let isDragging = false;
                    let offsetX, offsetY;
                    const header = popup.querySelector('div:first-child');
                    header.addEventListener('mousedown', (e) => {
                        isDragging = true;
                        const rect = popup.getBoundingClientRect();
                        offsetX = e.clientX - rect.left;
                        offsetY = e.clientY - rect.top;
                        const overlay = popup.parentElement;
                        currentZIndex++;
                        overlay.style.zIndex = currentZIndex;
                    });

                    document.addEventListener('mousemove', (e) => {
                        if (!isDragging) return;
                        popup.style.position = 'fixed';
                        popup.style.left = e.clientX - offsetX + 'px';
                        popup.style.top = e.clientY - offsetY + 'px';
                    });

                    document.addEventListener('mouseup', () => {
                        isDragging = false;
                    });

                    popup.addEventListener('mousedown', () => {
                        const overlay = popup.parentElement;
                        currentZIndex++;
                        overlay.style.zIndex = currentZIndex;
                    });
                });
                function closeEmail(e) {
                    e.stopPropagation(e);
                    document.getElementById('emailWindow').style.display = 'none';
                };

                function closePhoto(e) {
                    e.stopPropagation(e);
                    document.getElementById('photoWindow').style.display = 'none';
                };

            </script>
     </body>
</html>